(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1548:function(e,t,s){Promise.resolve().then(s.bind(s,8410))},8410:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),r=s(2265),i=s(4033),n=s(8793);let o="http://127.0.0.1:8000",l=async e=>{let t=localStorage.getItem("token"),s=await fetch("".concat(o,"/api/users/").concat(e,"/tasks"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(!s.ok)throw Error("Failed to fetch tasks: ".concat(s.status," ").concat(s.statusText));return await s.json()},c=async(e,t)=>{let s=localStorage.getItem("token"),a=await fetch("".concat(o,"/api/users/").concat(e,"/tasks"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to create task: ".concat(a.status," ").concat(a.statusText));return await a.json()},d=async(e,t)=>{let s=localStorage.getItem("token"),a=await fetch("".concat(o,"/api/users/").concat(e,"/tasks/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});if(!a.ok)throw Error("Failed to delete task: ".concat(a.status," ").concat(a.statusText));return await a.json()},m=async(e,t,s)=>{let a=localStorage.getItem("token"),r=await fetch("".concat(o,"/api/users/").concat(e,"/tasks/").concat(t,"/complete"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({is_completed:s})});if(!r.ok)throw Error("Failed to toggle task completion: ".concat(r.status," ").concat(r.statusText));return await r.json()};function u(){let{onTasksChange:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,s]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),[u,x]=(0,r.useState)(null),[h,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{f()},[]),(0,r.useEffect)(()=>{e&&e(t)},[t,e]);let f=async()=>{try{n(!0),c(null);let e=localStorage.getItem("user_id");if(!e){c("User not authenticated. Please log in first.");return}let t=await l(e);s(t.tasks||[])}catch(e){c("Failed to load tasks"),console.error(e)}finally{n(!1)}},p=async e=>{try{g(e);let a=localStorage.getItem("user_id");if(!a){c("User not authenticated. Please log in first.");return}let r=t.find(t=>t.id===e);if(!r)throw Error("Task not found");let i=!r.is_completed,n=await m(a,e,i);s(t.map(t=>t.id===e?{...t,is_completed:n.is_completed,updated_at:n.updated_at}:t))}catch(e){c("Failed to update task"),console.error(e)}finally{g(null)}},b=async e=>{if(window.confirm("Are you sure you want to delete this task?"))try{x(e);let a=localStorage.getItem("user_id");if(!a){c("User not authenticated. Please log in first.");return}await d(a,e),s(t.filter(t=>t.id!==e))}catch(e){c("Failed to delete task"),console.error(e)}finally{x(null)}};return i?(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 rounded-lg bg-gray-100 animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-5 w-5 rounded bg-gray-300 mr-3"}),(0,a.jsx)("div",{className:"h-4 bg-gray-300 rounded w-32"})]}),(0,a.jsx)("div",{className:"h-4 w-12 bg-gray-300 rounded"})]},t))}):o?(0,a.jsx)("div",{className:"text-center py-4 text-red-500",children:o}):(0,a.jsx)("div",{className:"mt-6",children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tasks"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new task."})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"text-gray-600",children:["Showing ",(0,a.jsx)("span",{className:"font-medium",children:t.length})," task",1!==t.length?"s":""]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[t.filter(e=>e.is_completed).length," completed"]})]}),(0,a.jsx)("ul",{className:"space-y-3",children:t.map(e=>(0,a.jsxs)("li",{className:"flex items-start justify-between px-4 py-4 rounded-lg transition-all duration-200 ".concat(e.is_completed?"bg-green-50 border border-green-200":"bg-white border border-gray-200 shadow-sm hover:shadow-md"),children:[(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.is_completed,onChange:()=>p(e.id),disabled:h===e.id,className:"h-5 w-5 mt-0.5 rounded focus:ring-indigo-500 ".concat(e.is_completed?"text-green-600 bg-green-200":"text-indigo-600"," ").concat(h===e.id?"opacity-50 cursor-not-allowed":"")}),(0,a.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,a.jsx)("span",{className:"text-base font-medium ".concat(e.is_completed?"line-through text-gray-500":"text-gray-900"),children:e.title}),e.description&&(0,a.jsx)("p",{className:"mt-1 text-sm ".concat(e.is_completed?"text-gray-400":"text-gray-500"),children:e.description}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-400",children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,a.jsx)("div",{className:"flex space-x-2 ml-4",children:(0,a.jsx)("button",{onClick:()=>b(e.id),disabled:u===e.id,className:"inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-md transition-colors duration-200 ".concat(u===e.id?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900 hover:bg-red-50"),children:u===e.id?"Deleting...":"Delete"})})]},e.id))})]})})}function x(){let[e,t]=(0,r.useState)({title:"",description:""}),[s,i]=(0,r.useState)(null),[n,o]=(0,r.useState)(null),[l,d]=(0,r.useState)(!1),m=e=>{let{name:a,value:r}=e.target;t(e=>({...e,[a]:r})),s&&i(null)},u=e=>{"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&x(e)},x=async s=>{if(s.preventDefault(),i(null),o(null),!e.title.trim()){i("Task title is required");return}d(!0);try{let s=localStorage.getItem("user_id");if(!s){i("User not authenticated. Please log in first.");return}(await c(s,{title:e.title,description:e.description})).id&&(o("Task created successfully!"),t({title:"",description:""}),setTimeout(()=>{o(null)},3e3))}catch(e){i("Failed to create task. Please try again."),console.error(e)}finally{d(!1)}};return(0,a.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl p-1 shadow-lg",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Add New Task"}),s&&(0,a.jsx)("div",{className:"rounded-lg bg-red-50 p-4 mb-4 border border-red-200",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,a.jsx)("div",{className:"mt-1 text-sm text-red-700",children:(0,a.jsx)("p",{children:s})})]})})}),n&&(0,a.jsx)("div",{className:"rounded-lg bg-green-50 p-4 mb-4 border border-green-200",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Success"}),(0,a.jsx)("div",{className:"mt-1 text-sm text-red-700",children:(0,a.jsx)("p",{children:n})})]})})}),(0,a.jsxs)("form",{onSubmit:x,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-800 mb-2 font-semibold",children:"Task Title *"}),(0,a.jsx)("input",{type:"text",id:"title",name:"title",value:e.title,onChange:m,onKeyDown:u,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200 ".concat(s&&!e.title.trim()?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"),placeholder:"What needs to be done?"}),s&&!e.title.trim()&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"Task title is required"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-800 mb-2 font-semibold",children:"Description"}),(0,a.jsx)("textarea",{id:"description",name:"description",value:e.description,onChange:m,onKeyDown:u,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200",placeholder:"Add details about your task (optional)"})]}),(0,a.jsx)("button",{type:"submit",disabled:l,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg text-base font-medium text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-200 transform hover:-translate-y-0.5 hover:shadow-md disabled:opacity-75 disabled:cursor-not-allowed",children:l?"Adding Task...":"Add Task"})]})]})})}function h(){let[e,t]=(0,r.useState)(null),[s,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),d=(0,i.useRouter)();(0,r.useEffect)(()=>{(async()=>{await (0,n.t0)()?t({email:"user@example.com"}):d.push("/login")})()},[d]);let m=async()=>{await (0,n.kS)(),d.push("/login")},h=async()=>{c(!0),setTimeout(()=>{c(!1)},1e3)};return e?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"TaskMaster"})})}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:h,disabled:l,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 p-2.5 rounded-full transition duration-200 shadow-sm hover:shadow-md flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",title:"Refresh tasks","aria-label":"Refresh tasks",children:l?"Refreshing...":"Refresh"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"hidden md:flex flex-col items-end",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate max-w-xs",title:e.email,children:e.email}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Dashboard"})]}),(0,a.jsx)("button",{onClick:m,className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white p-2.5 rounded-full transition duration-200 shadow-md hover:shadow-lg flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",title:"Logout","aria-label":"Logout",children:"Logout"})]})]})]})})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Good day, ",e.email.split("@")[0],"!"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Here's what's happening with your tasks today."})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 bg-indigo-50 rounded-lg px-4 py-2 border border-indigo-100",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-indigo-700",children:[s.length," tasks"]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-2 lg:col-span-2 space-y-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,a.jsx)(x,{})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900",id:"tasks-heading",children:"Your Tasks"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1","aria-describedby":"tasks-heading",children:s.length>0?"".concat(s.filter(e=>e.is_completed).length," of ").concat(s.length," completed"):"No tasks yet"})]})}),(0,a.jsx)("div",{className:"mb-6",children:s.length>0&&(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 h-2.5 rounded-full transition-all duration-1000 ease-out",style:{width:"".concat(s.filter(e=>e.is_completed).length/s.length*100,"%")}})})}),(0,a.jsx)(u,{onTasksChange:e=>{o(e)}})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2 lg:col-span-1 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl p-6 text-white shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Dashboard Stats"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:bg-white/25 cursor-pointer",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("p",{className:"text-sm opacity-80",children:"Total Tasks"})}),(0,a.jsx)("p",{className:"text-2xl font-bold mt-1",children:s.length})]}),(0,a.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:bg-white/25 cursor-pointer",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("p",{className:"text-sm opacity-80",children:"Completed"})}),(0,a.jsx)("p",{className:"text-2xl font-bold mt-1",children:s.filter(e=>e.is_completed).length})]}),(0,a.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4 transition-all duration-300 hover:scale-[1.02] hover:bg-white/25 cursor-pointer",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("p",{className:"text-sm opacity-80",children:"Pending"})}),(0,a.jsx)("p",{className:"text-2xl font-bold mt-1",children:s.filter(e=>!e.is_completed).length})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Tips"}),(0,a.jsxs)("ul",{className:"space-y-3 text-sm text-gray-600",children:[(0,a.jsx)("li",{className:"flex items-start p-3 rounded-lg hover:bg-indigo-50 transition-colors duration-200 border border-transparent hover:border-indigo-100 cursor-pointer",children:(0,a.jsx)("span",{className:"font-medium",children:"Click the checkbox to mark tasks as completed"})}),(0,a.jsx)("li",{className:"flex items-start p-3 rounded-lg hover:bg-indigo-50 transition-colors duration-200 border border-transparent hover:border-indigo-100 cursor-pointer",children:(0,a.jsx)("span",{className:"font-medium",children:"Use the delete button to remove tasks"})}),(0,a.jsx)("li",{className:"flex items-start p-3 rounded-lg hover:bg-indigo-50 transition-colors duration-200 border border-transparent hover:border-indigo-100 cursor-pointer",children:(0,a.jsx)("span",{className:"font-medium",children:"Add detailed descriptions for better task management"})})]})]})]})]})]})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-lg",children:"Loading..."})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Loading Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"We're preparing your tasks..."})]})})}},8793:function(e,t,s){"use strict";s.d(t,{IU:function(){return r},kS:function(){return n},t0:function(){return o},x4:function(){return i}});let a="http://127.0.0.1:8000",r=async e=>{try{let t;let s=await fetch("".concat(a,"/api/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password,first_name:e.firstName,last_name:e.lastName})}),r=s.headers.get("content-type");if(r&&r.includes("application/json"))t=await s.json();else{let e=await s.text();try{t=JSON.parse(e)}catch(e){t={detail:"Server error: ".concat(s.status," ").concat(s.statusText)}}}if(s.ok)return localStorage.setItem("user_id",t.id),localStorage.setItem("user_email",t.email),{success:!0,message:t.message,id:t.id,email:t.email};return{success:!1,message:t.detail||"Signup failed: ".concat(s.status," ").concat(s.statusText)}}catch(e){return console.error("Signup error:",e),{success:!1,message:"Network error occurred during signup"}}},i=async(e,t)=>{try{let s;let r=await fetch("".concat(a,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),i=r.headers.get("content-type");if(i&&i.includes("application/json"))s=await r.json();else{let e=await r.text();try{s=JSON.parse(e)}catch(e){s={detail:"Server error: ".concat(r.status," ").concat(r.statusText)}}}if(r.ok)return localStorage.setItem("user_id",s.id),localStorage.setItem("user_email",s.email),s.access_token&&localStorage.setItem("token",s.access_token),{success:!0,message:s.message,id:s.id,email:s.email,access_token:s.access_token};return{success:!1,message:s.detail||"Login failed: ".concat(r.status," ").concat(r.statusText)}}catch(e){return console.error("Login error:",e),{success:!1,message:"Network error occurred during login"}}},n=async()=>{try{return localStorage.removeItem("user_id"),localStorage.removeItem("user_email"),localStorage.removeItem("token"),!0}catch(e){return console.error("Logout error:",e),!1}},o=async()=>{try{let e=localStorage.getItem("user_id");return console.log("userId:",e),!!e}catch(e){return console.error("Error in checkAuthStatus:",e),!1}}},622:function(e,t,s){"use strict";var a=s(2265),r=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),n=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,s){var a,l={},c=null,d=null;for(a in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,a)&&!o.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:r,type:e,key:c,ref:d,props:l,_owner:n.current}}t.jsx=l,t.jsxs=l},7437:function(e,t,s){"use strict";e.exports=s(622)},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=1548)}),_N_E=e.O()}]);